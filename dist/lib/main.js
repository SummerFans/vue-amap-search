!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("Vue"));else if("function"==typeof define&&define.amd)define(["Vue"],t);else{var a=t("object"==typeof exports?require("Vue"):e.Vue);for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(this,function(e){return function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){e.exports=function(e,t,a,n){var o,i=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(o=e,i=e.default);var c="function"==typeof i?i.options:i;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),a&&(c._scopeId=a),n){var s=Object.create(c.computed||null);Object.keys(n).forEach(function(e){var t=n[e];s[e]=function(){return t}}),c.computed=s}return{esModule:o,exports:i,options:c}}},function(e,t,a){a(5);var n=a(0)(a(3),a(10),null,null);t.__esModule=!0,t.default=n.exports},function(t,a){t.exports=e},function(e,t,a){e.exports=a(7).default},function(e,t,a){e.exports=a(8).default},function(e,t){},function(e,t){},function(e,t,a){"use strict";var n=a(9),o={name:"Mr. Right"};Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app",data:function(){return{msg:"Welcome to Your Vue.js App --- "+o.name,userInput:"",pickedLocation:{}}},methods:{handleUserInput:function(e){this.userInput=e},handlePickedLocation:function(e){this.pickedLocation=e}},components:{amapSearch:n.default}}},function(e,t,a){"use strict";var n=a(12);console.log(n.amapmixinApp),Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"amapSearch",data:function(){return{autocomplateInput:""}},watch:{autocomplateInput:function(e,t){this.$emit("userInput",e)}},props:{defaultLng:{type:Number,default:39.90923,required:!1},defaultLat:{type:Number,default:116.397428,required:!1},defaultCity:{type:String,default:"北京",required:!1},searchCount:{type:Number,default:1,required:!1}},methods:{setMarkerLocation:function(e){this.$emit("pickedLocation",e)}},mounted:function(){this.initAmap("amap-container",[this.defaultLat,this.defaultLng]),this.initAutocomplate("autocomplate-input",this.searchCount,this.defaultCity)},mixins:[n.amapmixinApp]}},function(e,t,a){a(6);var n=a(0)(a(4),a(11),null,null);t.__esModule=!0,t.default=n.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"amap-search"},[a("amap-search",{attrs:{searchCount:5},on:{userInput:e.handleUserInput,pickedLocation:e.handlePickedLocation}})],1),e._v(" "),a("h3",[e._v("高德gcj02 坐标系")]),e._v(" "),a("p",[a("code",[e._v("用户输入 ")]),e._v(" "+e._s(e.userInput))]),e._v(" "),a("p",[a("code",[e._v("用户点击确定后的经纬度")]),e._v(" "+e._s(e.pickedLocation.lat)+","+e._s(e.pickedLocation.lng))])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-container"},[a("div",{staticClass:"autocomplate-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.autocomplateInput,expression:"autocomplateInput"}],attrs:{type:"text",id:"autocomplate-input",placeholder:"输入详细地址,越详细定位越精准"},domProps:{value:e.autocomplateInput},on:{input:function(t){t.target.composing||(e.autocomplateInput=t.target.value)}}}),e._v(" "),a("button",{on:{click:e.searchDefaultSuggestion}},[e._v("\n          搜索\n      ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedPoi.location,expression:"selectedPoi.location"}],ref:"marker-content",staticClass:"marker-content"},[e._m(0),e._v(" "),a("div",{staticClass:"marker-info"},[a("div",{staticClass:"marker-name"},[e._v(e._s(e.selectedPoi.name))]),e._v(" "),a("div",{staticClass:"marker-address"},[e._v(e._s(e.selectedPoi.address))])]),e._v(" "),a("a",{staticClass:"btn btn-success",on:{click:function(t){e.setMarkerLocation(e.selectedPoi.location)}}},[e._v("确定")])]),e._v(" "),a("div",{attrs:{id:"amap-container"}})])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"marker-content-header"},[a("div",{staticClass:"marker-circle"},[a("span",{staticClass:"fa fa-check"})]),e._v(" "),a("span",{staticClass:"notice"},[e._v("已将坐标定位为")])])}]}},function(e,t,a){"use strict";var n=function(e){console.log("taost"+e)};t.amapmixinApp={data:function(){return{map:{},autocomplete:{},placeSearch:{},amapCounty:{},geocoder:{},selectedPoi:{},editingPolygon:{},mouseTool:{}}},mounted:function(){console.log("amapmixin mounted")},methods:{initAmap:function(e,t){var a=this;a.map=new AMap.Map(e,{resizeEnable:!0,zoom:12,center:t}),AMap.plugin(["AMap.ToolBar","AMap.Scale"],function(){a.map.addControl(new AMap.ToolBar),a.map.addControl(new AMap.Scale)}),a.geocoder=new AMap.Geocoder({radius:1e3,extensions:"all"}),AMap.MouseTool&&(a.mouseTool=new AMap.MouseTool(a.map))},initAutocomplate:function(e,t,a){console.log("cityname",a);var o=this;AMap.plugin(["AMap.Autocomplete","AMap.PlaceSearch"],function(){var i={city:a&&"",input:e};o.autocomplete=new AMap.Autocomplete(i),o.placeSearch=new AMap.PlaceSearch({city:a,map:"",pageSize:t}),AMap.event.addListener(o.autocomplete,"select",function(e){console.log("autocomplate select event"),o.autocomplateInput=e.poi.name,o.placeSearch.search(e.poi.name,function(e,t){"complete"===e&&"OK"===t.info?(o.map.clearMap(),o.renderSearchMarker(t.poiList.pois),o.map.setFitView(),o.map.setZoom(14),o.placeSearch.clear()):n("没有匹配结果<br>或者结果太多")})})})},searchDefaultSuggestion:function(e){var t=this;t.placeSearch.search(this.autocomplateInput,function(e,a){"complete"===e&&"OK"===a.info?(t.map.clearMap(),t.renderSearchMarker(a.poiList.pois),t.map.setFitView(),t.map.setZoom(14),t.placeSearch.clear()):n("没有匹配结果<br>或者结果太多")})},renderSearchMarker:function(e){for(var t,a=this,n=new AMap.InfoWindow({offset:new AMap.Pixel(-9,-30)}),o=0,i=function(e){o++,t=new AMap.Marker({position:e.location,map:a.map,icon:"http://webapi.amap.com/theme/v1.3/markers/n/mark_b"+o+".png",draggable:!0}),t.content=a.$refs["marker-content"],t.setExtData({isMoved:!1}),t.on("click",function(t){this.getExtData().isMoved||(a.selectedPoi=e,a.selectedPoi.isMoved=this.getExtData().isMoved),n.setContent(t.target.content),n.open(a.map,t.target.getPosition())}),t.emit("click",{target:t}),a.setMarkerLocation(e.location),t.on("dragstart",function(e){a.map.clearInfoWindow()}),t.on("dragend",function(e){t.setExtData({isMoved:!0}),console.log(e.lnglat);var n=e.lnglat.lat,o=e.lnglat.lng;t.setPosition(new AMap.LngLat(o,n)),a.geocoder.getAddress(e.lnglat,function(n,o){if("complete"===n&&"OK"===o.info){console.log(o);var i=o.regeocode.addressComponent;a.selectedPoi={location:e.lnglat,address:i.district+i.street+i.streetNumber,name:o.regeocode.formattedAddress,isMoved:!0},console.log(a.selectedPoi),t.emit("click",{target:t})}})})},r=0,c=e;r<c.length;r++){i(c[r])}},initAMapDistrictSearch:function(e,t){var a=this;AMap.service("AMap.DistrictSearch",function(){var n={subdistrict:1,extensions:"base",showbiz:!1,level:"district"};new AMap.DistrictSearch(n).search(e,function(e,n){var o=n.districtList[0];a.map.setCenter(o.center),a.map.setZoom(12),t(o)})})}}}},function(e,t,a){"use strict";var n=a(2),o=a(1);new n.default({el:"#app",components:{App:o.default},render:function(e){return e(o.default)}})}])});
//# sourceMappingURL=main.js.map